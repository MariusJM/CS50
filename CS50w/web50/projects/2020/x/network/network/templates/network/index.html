{% extends "network/layout.html" %}

{% block body %}
    TODO
    <style>
        .new-post {
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem 0;
        }

        .new-post textarea {
            width: 100%;
            box-sizing: border-box;
            resize: vertical;
            height: 2em;
            overflow-y: hidden;
        }

        .new-post button {
            text-align: left;
        }
    </style>

    <script>
        function autoResize() {
            var textarea = document.querySelector('.new-post textarea');
            textarea.style.height = 'auto'; /* auto resize */
            textarea.style.height = (textarea.scrollHeight) + 'px'; /* auto resize */
        }
    </script>

    {% if user.is_authenticated %}
    <section class="middle">
        <div class="new-post">
            <form method="post" action="{% url 'create_post' %}">
                {% csrf_token %}
                <textarea name="newpost" id="new-post" oninput="autoResize()"></textarea>
                <div>
                    <button type="submit">New post</button>
                </div>
            </form>
        </div>
    </section>
    {% endif %}

    <section class="middle new-post">
        <div>
            <ul>
                {% for item in posts %}
                <li>
                    <h4>{{ item.author }} posted:</h4>
                    <div>
                        <p>{{ item.content }}</p>
                        <div>
                            <div>date created {{ item.created_at }}</div>
                            <div>Likes {{ item.likes}}</div>
                        </div>
                    </div>
                </li>
                {% endfor %}
                
            </ul>
        </div>
    </section>
{% endblock %}
